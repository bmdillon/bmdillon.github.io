<div class="header">
    <h1>Barry Dillon</h1>
    <br>
    <div class="header-photo-wrap">
        <img src="/assets/profile-picture.jpg" alt="Photo of Barry" class="header-photo">
    </div>
    <h5><i id="role-rotator" data-role-en="Theoretical Physicist" data-role-ga="Fisiceoir teoiriciúil">Fisiceoir teoiriciúil</i></h5>
    <br>
    <h5><i id="title-rotator" data-title-en="Lecturer in Mathematics at Ulster University Derry" data-title-ga="Léachtóir matamaitice in Ollscoil Uladh, Doire">Léachtóir matamaitice in Ollscoil Uladh, Doire</i></h5>
    <script>
        (function () {
            var roleEl = document.getElementById("role-rotator");
            var titleEl = document.getElementById("title-rotator");
            if (!roleEl || !titleEl) return;

            var roleEn = roleEl.getAttribute("data-role-en");
            var roleGa = roleEl.getAttribute("data-role-ga");
            var titleEn = titleEl.getAttribute("data-title-en");
            var titleGa = titleEl.getAttribute("data-title-ga");

            var EN_DURATION = 2300;
            var FLICKER_DURATION = 700;
            var IRISH_DURATION = 3000;
            var FLICKER_INTERVAL = 70;

            function setEnglish() {
                roleEl.textContent = roleEn;
                titleEl.textContent = titleEn;
            }

            function setIrish() {
                roleEl.textContent = roleGa;
                titleEl.textContent = titleGa;
            }

            function randomBlend(en, ga) {
                var maxLen = Math.max(en.length, ga.length);
                var out = "";
                for (var i = 0; i < maxLen; i++) {
                    var fromEn = Math.random() > 0.5;
                    var ch = fromEn ? en.charAt(i) : ga.charAt(i);
                    out += ch ? ch : " ";
                }
                return out;
            }

            function flickerToIrish(next) {
                var start = Date.now();
                var flickerTimer = setInterval(function () {
                    var elapsed = Date.now() - start;
                    if (elapsed >= FLICKER_DURATION) {
                        clearInterval(flickerTimer);
                        setIrish();
                        next();
                        return;
                    }
                    roleEl.textContent = randomBlend(roleEn, roleGa);
                    titleEl.textContent = randomBlend(titleEn, titleGa);
                }, FLICKER_INTERVAL);
            }

            function cycle() {
                setEnglish();
                setTimeout(function () {
                    flickerToIrish(function () {
                        setTimeout(cycle, IRISH_DURATION);
                    });
                }, EN_DURATION);
            }

            // Start in Irish on page load.
            setIrish();
            setTimeout(cycle, IRISH_DURATION);
        })();
    </script>
    {% include nav.html %}
    <hr>
</div>
